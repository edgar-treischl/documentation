<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Introduction to reactive programming | Mastering Shiny</title>
  <meta name="description" content="The official guide to the Shiny web application framework for R." />
  <meta name="generator" content="bookdown  and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Introduction to reactive programming | Mastering Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The official guide to the Shiny web application framework for R." />
  <meta name="github-repo" content="jcheng5/shiny-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Introduction to reactive programming | Mastering Shiny" />
  
  <meta name="twitter:description" content="The official guide to the Shiny web application framework for R." />
  

<meta name="author" content="Joe Cheng" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="advanced-ui.html">
<link rel="next" href="reactive-programming.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#other-r-packages"><i class="fa fa-check"></i>Other R packages</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#cheat-sheet"><i class="fa fa-check"></i><b>1.2</b> Cheat sheet</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#if-you-get-stuck"><i class="fa fa-check"></i><b>1.3</b> If you get stuck</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your first Shiny app</a><ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#introduction"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#create-app"><i class="fa fa-check"></i><b>2.1</b> Create app dir and file</a></li>
<li class="chapter" data-level="2.2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#running"><i class="fa fa-check"></i><b>2.2</b> Running and stopping</a></li>
<li class="chapter" data-level="2.3" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#adding-ui"><i class="fa fa-check"></i><b>2.3</b> Adding UI controls</a><ul>
<li class="chapter" data-level="2.3.1" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#input-and-output-ids"><i class="fa fa-check"></i><b>2.3.1</b> Input and output IDs</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#server-function"><i class="fa fa-check"></i><b>2.4</b> Adding behavior</a></li>
<li class="chapter" data-level="2.5" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#reactive-expr"><i class="fa fa-check"></i><b>2.5</b> Extracting common values with reactive expressions</a></li>
<li class="chapter" data-level="2.6" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercises"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="understanding-ui.html"><a href="understanding-ui.html"><i class="fa fa-check"></i><b>3</b> Understanding UI</a><ul>
<li class="chapter" data-level="" data-path="understanding-ui.html"><a href="understanding-ui.html#outline-1"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="3.1" data-path="understanding-ui.html"><a href="understanding-ui.html#its-just-html"><i class="fa fa-check"></i><b>3.1</b> It’s just HTML</a></li>
<li class="chapter" data-level="3.2" data-path="understanding-ui.html"><a href="understanding-ui.html#inputs"><i class="fa fa-check"></i><b>3.2</b> Inputs</a></li>
<li class="chapter" data-level="3.3" data-path="understanding-ui.html"><a href="understanding-ui.html#outputs"><i class="fa fa-check"></i><b>3.3</b> Outputs</a></li>
<li class="chapter" data-level="3.4" data-path="understanding-ui.html"><a href="understanding-ui.html#layouts-and-panels"><i class="fa fa-check"></i><b>3.4</b> Layouts and panels</a><ul>
<li class="chapter" data-level="3.4.1" data-path="understanding-ui.html"><a href="understanding-ui.html#page-functions"><i class="fa fa-check"></i><b>3.4.1</b> Page functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>4</b> Advanced UI</a><ul>
<li class="chapter" data-level="4.1" data-path="advanced-ui.html"><a href="advanced-ui.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="advanced-ui.html"><a href="advanced-ui.html#outline-2"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-ui.html"><a href="advanced-ui.html#introduction-to-html"><i class="fa fa-check"></i><b>4.2</b> Introduction to HTML</a><ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-ui.html"><a href="advanced-ui.html#inline-formatting-tags"><i class="fa fa-check"></i><b>4.2.1</b> Inline formatting tags</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-ui.html"><a href="advanced-ui.html#block-tags"><i class="fa fa-check"></i><b>4.2.2</b> Block tags</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-ui.html"><a href="advanced-ui.html#tag-attributes"><i class="fa fa-check"></i><b>4.2.3</b> Tag attributes</a></li>
<li class="chapter" data-level="4.2.4" data-path="advanced-ui.html"><a href="advanced-ui.html#parents-and-children"><i class="fa fa-check"></i><b>4.2.4</b> Parents and children</a></li>
<li class="chapter" data-level="4.2.5" data-path="advanced-ui.html"><a href="advanced-ui.html#comments"><i class="fa fa-check"></i><b>4.2.5</b> Comments</a></li>
<li class="chapter" data-level="4.2.6" data-path="advanced-ui.html"><a href="advanced-ui.html#escaping"><i class="fa fa-check"></i><b>4.2.6</b> Escaping</a></li>
<li class="chapter" data-level="4.2.7" data-path="advanced-ui.html"><a href="advanced-ui.html#html-tag-vocabulary"><i class="fa fa-check"></i><b>4.2.7</b> HTML tag vocabulary</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-ui.html"><a href="advanced-ui.html#generating-html"><i class="fa fa-check"></i><b>4.3</b> Generating HTML with tag objects</a><ul>
<li class="chapter" data-level="4.3.1" data-path="advanced-ui.html"><a href="advanced-ui.html#using-functions-to-create-tags"><i class="fa fa-check"></i><b>4.3.1</b> Using functions to create tags</a></li>
<li class="chapter" data-level="4.3.2" data-path="advanced-ui.html"><a href="advanced-ui.html#using-named-arguments-to-create-attributes"><i class="fa fa-check"></i><b>4.3.2</b> Using named arguments to create attributes</a></li>
<li class="chapter" data-level="4.3.3" data-path="advanced-ui.html"><a href="advanced-ui.html#using-unnamed-arguments-to-create-children"><i class="fa fa-check"></i><b>4.3.3</b> Using unnamed arguments to create children</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="advanced-ui.html"><a href="advanced-ui.html#using-css"><i class="fa fa-check"></i><b>4.4</b> Customizing with CSS</a><ul>
<li class="chapter" data-level="4.4.1" data-path="advanced-ui.html"><a href="advanced-ui.html#introduction-to-css"><i class="fa fa-check"></i><b>4.4.1</b> Introduction to CSS</a></li>
<li class="chapter" data-level="4.4.2" data-path="advanced-ui.html"><a href="advanced-ui.html#including-custom-css-in-shiny"><i class="fa fa-check"></i><b>4.4.2</b> Including custom CSS in Shiny</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="advanced-ui.html"><a href="advanced-ui.html#dependencies"><i class="fa fa-check"></i><b>4.5</b> Managing JavaScript/CSS dependencies</a><ul>
<li class="chapter" data-level="4.5.1" data-path="advanced-ui.html"><a href="advanced-ui.html#creating-html-dependency-objects"><i class="fa fa-check"></i><b>4.5.1</b> Creating HTML dependency objects</a></li>
<li class="chapter" data-level="4.5.2" data-path="advanced-ui.html"><a href="advanced-ui.html#using-html-dependency-objects"><i class="fa fa-check"></i><b>4.5.2</b> Using HTML dependency objects</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="advanced-ui.html"><a href="advanced-ui.html#html-templates"><i class="fa fa-check"></i><b>4.6</b> HTML templates</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html"><i class="fa fa-check"></i><b>5</b> Introduction to reactive programming</a><ul>
<li class="chapter" data-level="" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#outline-3"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="5.1" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#the-server-function"><i class="fa fa-check"></i><b>5.1</b> The server function</a><ul>
<li class="chapter" data-level="5.1.1" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#server-function-parameters"><i class="fa fa-check"></i><b>5.1.1</b> Server function parameters</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#input"><i class="fa fa-check"></i><b>5.2</b> Input</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#output"><i class="fa fa-check"></i><b>5.3</b> Output</a><ul>
<li class="chapter" data-level="5.3.1" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#imperative-vs.declarative"><i class="fa fa-check"></i><b>5.3.1</b> Imperative vs. declarative</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#inputs-and-outputs"><i class="fa fa-check"></i><b>5.4</b> Using inputs from outputs</a><ul>
<li class="chapter" data-level="5.4.1" data-path="introduction-to-reactive-programming.html"><a href="introduction-to-reactive-programming.html#outputs-are-atomic"><i class="fa fa-check"></i><b>5.4.1</b> Outputs are atomic</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="reactive-programming.html"><a href="reactive-programming.html"><i class="fa fa-check"></i><b>6</b> Reactive programming</a><ul>
<li class="chapter" data-level="6.1" data-path="reactive-programming.html"><a href="reactive-programming.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="reactive-programming.html"><a href="reactive-programming.html#terminology-note"><i class="fa fa-check"></i>Terminology note</a></li>
<li class="chapter" data-level="" data-path="reactive-programming.html"><a href="reactive-programming.html#outline-4"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="reactive-programming.html"><a href="reactive-programming.html#motivation"><i class="fa fa-check"></i><b>6.2</b> Introducing reactive programming</a><ul>
<li class="chapter" data-level="6.2.1" data-path="reactive-programming.html"><a href="reactive-programming.html#event-driven"><i class="fa fa-check"></i><b>6.2.1</b> The traditional approach: Event-driven programming</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="reactive-programming.html"><a href="reactive-programming.html#primitives"><i class="fa fa-check"></i><b>6.3</b> The building blocks of reactive programming</a><ul>
<li class="chapter" data-level="6.3.1" data-path="reactive-programming.html"><a href="reactive-programming.html#reactive-values-values-that-change-over-time"><i class="fa fa-check"></i><b>6.3.1</b> Reactive values: values that change over time</a></li>
<li class="chapter" data-level="6.3.2" data-path="reactive-programming.html"><a href="reactive-programming.html#observers-actions-that-execute-automatically"><i class="fa fa-check"></i><b>6.3.2</b> Observers: Actions that execute automatically</a></li>
<li class="chapter" data-level="6.3.3" data-path="reactive-programming.html"><a href="reactive-programming.html#reactive-expressions-smart-calculations"><i class="fa fa-check"></i><b>6.3.3</b> Reactive expressions: Smart calculations</a></li>
<li class="chapter" data-level="6.3.4" data-path="reactive-programming.html"><a href="reactive-programming.html#outputs-1"><i class="fa fa-check"></i><b>6.3.4</b> Outputs</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="reactive-programming.html"><a href="reactive-programming.html#example"><i class="fa fa-check"></i><b>6.4</b> An example: CRAN download logs</a><ul>
<li class="chapter" data-level="6.4.1" data-path="reactive-programming.html"><a href="reactive-programming.html#what-are-the-inputs-for-the-user-to-provide"><i class="fa fa-check"></i><b>6.4.1</b> 1. What are the inputs for the user to provide?</a></li>
<li class="chapter" data-level="6.4.2" data-path="reactive-programming.html"><a href="reactive-programming.html#what-are-the-conceptual-steps-performed-in-the-script"><i class="fa fa-check"></i><b>6.4.2</b> 2. What are the conceptual “steps” performed in the script?</a></li>
<li class="chapter" data-level="6.4.3" data-path="reactive-programming.html"><a href="reactive-programming.html#for-each-of-the-steps-performed-is-it-a-calculation-an-output-or-a-task"><i class="fa fa-check"></i><b>6.4.3</b> 3. For each of the steps performed: is it a <em>calculation</em>, an <em>output</em>, or a <em>task</em>?</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="reactive-programming.html"><a href="reactive-programming.html#dependency-tracking"><i class="fa fa-check"></i><b>6.5</b> Demystifying dependency tracking</a><ul>
<li class="chapter" data-level="6.5.1" data-path="reactive-programming.html"><a href="reactive-programming.html#how-dependency-tracking-works"><i class="fa fa-check"></i><b>6.5.1</b> How dependency tracking works</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="reactive-programming.html"><a href="reactive-programming.html#step-through"><i class="fa fa-check"></i><b>6.6</b> A step-by-step tour of reactive execution</a><ul>
<li class="chapter" data-level="6.6.1" data-path="reactive-programming.html"><a href="reactive-programming.html#a-session-begins"><i class="fa fa-check"></i><b>6.6.1</b> A session begins</a></li>
<li class="chapter" data-level="6.6.2" data-path="reactive-programming.html"><a href="reactive-programming.html#execution-begins"><i class="fa fa-check"></i><b>6.6.2</b> Execution begins</a></li>
<li class="chapter" data-level="6.6.3" data-path="reactive-programming.html"><a href="reactive-programming.html#reading-a-reactive-expression"><i class="fa fa-check"></i><b>6.6.3</b> Reading a reactive expression</a></li>
<li class="chapter" data-level="6.6.4" data-path="reactive-programming.html"><a href="reactive-programming.html#reading-an-input"><i class="fa fa-check"></i><b>6.6.4</b> Reading an input</a></li>
<li class="chapter" data-level="6.6.5" data-path="reactive-programming.html"><a href="reactive-programming.html#reactive-expression-completes"><i class="fa fa-check"></i><b>6.6.5</b> Reactive expression completes</a></li>
<li class="chapter" data-level="6.6.6" data-path="reactive-programming.html"><a href="reactive-programming.html#observer-completes"><i class="fa fa-check"></i><b>6.6.6</b> Observer completes</a></li>
<li class="chapter" data-level="6.6.7" data-path="reactive-programming.html"><a href="reactive-programming.html#the-next-observer-executes"><i class="fa fa-check"></i><b>6.6.7</b> The next observer executes</a></li>
<li class="chapter" data-level="6.6.8" data-path="reactive-programming.html"><a href="reactive-programming.html#execution-completes-outputs-flushed"><i class="fa fa-check"></i><b>6.6.8</b> Execution completes, outputs flushed</a></li>
<li class="chapter" data-level="6.6.9" data-path="reactive-programming.html"><a href="reactive-programming.html#an-input-changes"><i class="fa fa-check"></i><b>6.6.9</b> An input changes</a></li>
<li class="chapter" data-level="6.6.10" data-path="reactive-programming.html"><a href="reactive-programming.html#notifying-dependents"><i class="fa fa-check"></i><b>6.6.10</b> Notifying dependents</a></li>
<li class="chapter" data-level="6.6.11" data-path="reactive-programming.html"><a href="reactive-programming.html#removing-relationships"><i class="fa fa-check"></i><b>6.6.11</b> Removing relationships</a></li>
<li class="chapter" data-level="6.6.12" data-path="reactive-programming.html"><a href="reactive-programming.html#reexecution"><i class="fa fa-check"></i><b>6.6.12</b> Reexecution</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-reactive-programming" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Introduction to reactive programming</h1>
<p>In the previous chapters, we talked about creating user interfaces. Now we’ll move on to discuss the server side of Shiny, where we use R code at runtime to make our user interfaces come alive!</p>
<p>In Shiny, you express your server logic using reactive programming. Reactive programming is an elegant and powerful programming paradigm, but it can be disorienting at first for the average R user, who is used to executing code at the R console or in a linearly executed R script.</p>
<p>This chapter will provide a gentle walkthrough of reactive programming, introducing some of the most basic reactive constructs you’ll use in your Shiny apps.</p>
<div id="outline-3" class="section level3 unnumbered">
<h3>Outline</h3>
<ul>
<li>Section <a href="your-first-shiny-app.html#server-function">2.4</a> introduces you to the <em>server function</em>, the body of which will be the site of most of your reactive programming.</li>
<li>Section <a href="introduction-to-reactive-programming.html#input">5.2</a> introduces the <code>input</code> object, the humble center of most reactive programs.</li>
<li>Section <a href="introduction-to-reactive-programming.html#output">5.3</a> introduces the <code>output</code> object, a place to hang logic that populates outputs in the UI.</li>
<li>Section <a href="introduction-to-reactive-programming.html#inputs-and-outputs">5.4</a> shows the consequences of accessing <code>input</code> values from your <code>output</code> logic—the simplest form of reactivity.</li>
<li>Section <a href="#reactive-exprs"><strong>??</strong></a> introduces <em>reactive expressions</em>, which provide a way to model intermediate computations. Reactive expressions are key to writing Shiny apps that perform well and are easy to reason about.</li>
</ul>
</div>
<div id="the-server-function" class="section level2">
<h2><span class="header-section-number">5.1</span> The server function</h2>
<p>The typical Shiny app boilerplate looks like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)

ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="co"># UI goes here</span>
)

server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  <span class="co"># Server logic goes here</span>
}

<span class="kw">shinyApp</span>(ui, server)</code></pre></div>
<p>As you can see, the <code>server</code> function is a function that you (the app author) define, and pass to Shiny via the <code>shinyApp</code> function. You’ll never invoke a server function yourself; rather, Shiny invokes it whenever a new session begins. (A session begins each time the Shiny app is loaded by a browser.) You can think of the server function as the logic for <em>initializing</em> a new session.</p>
<p>Almost all of the reactive programming you’ll do in Shiny will be directly in the server function, at least at first. This is because each time the server function is executed, it creates a private scope for that particular session. Novice Shiny app authors often wonder whether it’s safe for two users to connect to a single Shiny app at the same time—how does Shiny keep track of whose inputs and outputs are whose? It’s this private scoping that makes it possible, even natural, to maintain separation between sessions.</p>
<p>Every local variable you create in the body of the server function will be private, accessible only to a particular session. Most of the time, we’ll also want our reactive interactions to be private to each session, too: when user A moves a slider, you usually want outputs to update ony for user A, not user B. Therefore, we’ll write our reactive logic in the server function.</p>
<div id="server-function-parameters" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Server function parameters</h3>
<p>Server functions always take three parameters: <code>input</code>, <code>output</code>, and <code>session</code>. (For legacy reasons, <code>session</code> is optional, but you should include it.) You’ll never create these objects yourself; rather, they are created by Shiny when a session begins. Each <code>input</code>, <code>output</code>, and <code>session</code> connects back to a specific browser tab; we’ll use these objects to communicate back and forth with the browser.</p>
<p>For the moment, we’ll focus on <code>input</code> and <code>output</code>, and leave <code>session</code> for later chapters.</p>
</div>
</div>
<div id="input" class="section level2">
<h2><span class="header-section-number">5.2</span> Input</h2>
<p>The <code>input</code> object is a list-like object that contains all the input data sent from the browser, stored by input ID. If your UI contains a numeric input control with an input ID of <code>count</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">numericInput</span>(<span class="st">&quot;count&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Number of values&quot;</span>, <span class="dt">value =</span> <span class="dv">100</span>)</code></pre></div>
<p>then <code>input$count</code> will initially contain the value <code>100</code>. As the user changes the value in the browser, <code>input$count</code> will be updated automatically by Shiny.</p>
<p>Unlike a typical R list, <code>input</code> objects are read-only. The following line will not work:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Throws an error</span>
input<span class="op">$</span>count &lt;-<span class="st"> </span><span class="dv">10</span></code></pre></div>
<p>The reason for this restriction is that <code>input</code> is supposed to reflect what’s happening in the browser; the browser is the “single source of truth”. Being able to directly modify the <code>input</code> object would introduce a second source of truth, which could then be in conflict with the state of the browser.</p>
<p>One more important thing about <code>input</code> is that it’s a bit selective about who is allowed to read it. This server function will throw an error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  <span class="kw">message</span>(<span class="st">&quot;The value of input$count is &quot;</span>, input<span class="op">$</span>count)
}</code></pre></div>
<p>To new Shiny app authors, this is an extremely surprising limitation! But rest assured that <code>input</code>’s selectivity is a feature, not a bug. To explain why, we’ll first need to talk about outputs.</p>
</div>
<div id="output" class="section level2">
<h2><span class="header-section-number">5.3</span> Output</h2>
<p>Shiny UIs not only contain inputs, but outputs as well. The various <code>*Output</code> UI functions—<code>plotOutput</code>, <code>tableOutput</code>, <code>verbatimTextOutput</code>—merely insert empty boxes, or placeholders, into your UI. The <code>output</code> object is how you provide Shiny with instructions for populating these empty boxes.</p>
<p>You use the <code>output</code> object by wrapping a code block with a render function, then assigning all of that to a slot on the <code>output</code> object. Like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  output<span class="op">$</span>hist_plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Choose 100 random values from a normal distribution,</span>
    <span class="co"># and create a histogram</span>
    <span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
  })
}</code></pre></div>
<p>This snippet assumes that the UI contains a <code>plotOutput(&quot;hist_plot&quot;)</code>. The render function you use (<code>renderPlot</code>) must match with the output function (<code>plotOutput</code>), and the output slot (<code>hist_plot</code>) must match with the output ID.</p>
<div id="imperative-vs.declarative" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Imperative vs. declarative</h3>
<p>TODO: Make this a sidebar (somehow)?</p>
<p>You might read this code and think it means, “Render the plot <code>hist(rnorm(100L))</code>, and fill <code>plotOutput(&quot;hist_plot&quot;)</code> with it.” But this intuition is wrong, in a subtle but important way. This code does not <em>instruct</em> Shiny to render the plot and send it to the browser, but instead, tells Shiny <em>how it could</em> render the plot, if and when Shiny wanted to. This is the difference between <em>imperative</em> programming, which is what we’re used to, and <em>declarative</em> programming, which is what Shiny demands.</p>
<p>Imperative programming is about issuing specific commands, to be carried out immediately. Declarative programming is about expressing some higher-level goals or constraints, and relying on someone else (in this case, Shiny) to decide how and/or when to translate that into action.</p>
<p>Imperative says: “Go make me a sandwich.”</p>
<p>Declarative says: “Ensure there is a sandwich in the refrigerator at all times.” (Sorry, sometimes Declarative can be a demanding jerk.)</p>
<p>You may actually be more familiar with declarative programming than you think. SQL and regular expressions are examples of declarative programming. Excel formulas are too.</p>
<p>The correct, declarative reading of the code snippet above is “Whenever you (Shiny) want to render the <code>hist</code> output, be sure to do it as a plot, and the logic for doing so is <code>hist(rnorm(100L))</code>.” It’s totally up to Shiny whether and when to actually render the plot; maybe right away, maybe quite a bit later, maybe many times, maybe never. This isn’t to imply that Shiny is capricious and arbitrary, only that it’s Shiny’s responsibility, instead of the app author’s, to decide when render logic is actually executed.</p>
<p>(On the other hand, the <em>contents</em> of the output’s code block—i.e. the rendering logic you supply—may be pretty imperative. It’s specifically the assignment of the render function to <code>output$hist_plot</code> that’s declarative.)</p>
</div>
</div>
<div id="inputs-and-outputs" class="section level2">
<h2><span class="header-section-number">5.4</span> Using inputs from outputs</h2>
<p>The above rendering logic, <code>hist(rnorm(100))</code>, isn’t very exciting; the user can’t interact with this app in any way (unless you count reloading the browser, which would generate a new batch of values). Let’s modify the output to use the input. The complete app is below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)

ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">numericInput</span>(<span class="st">&quot;count&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Number of values&quot;</span>, <span class="dt">value =</span> <span class="dv">100</span>),
  <span class="kw">plotOutput</span>(<span class="st">&quot;hist_plot&quot;</span>)
)

server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  output<span class="op">$</span>hist_plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Choose input$count random values from a normal distribution,</span>
    <span class="co"># and create a histogram</span>
    <span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>count))
  })
}

<span class="kw">shinyApp</span>(ui, server)</code></pre></div>
<p>Run this app, and you’ll notice that as you change the <code>count</code> input, the output updates immediately. This is reactive programming at work! When one thing (<code>input$count</code>) changes, other things (<code>output$hist_plot</code>) automatically and immediately respond.</p>
<p>Let’s see what happens if we add a few more inputs and outputs. In this next example, we’ve added a new input that affects the histogram: <code>input$bins</code> is used to suggest a number of bins to the <code>hist()</code> function. We’ve also added a table output, that limits itself to displaying the first <code>input$rows</code> of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)

ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">numericInput</span>(<span class="st">&quot;count&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Number of values&quot;</span>, <span class="dt">value =</span> <span class="dv">100</span>),
  <span class="kw">numericInput</span>(<span class="st">&quot;bins&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Bins (approx)&quot;</span>, <span class="dt">value =</span> <span class="dv">10</span>),
  <span class="kw">plotOutput</span>(<span class="st">&quot;hist_plot&quot;</span>),
  <span class="kw">numericInput</span>(<span class="st">&quot;rows&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Rows to show&quot;</span>, <span class="dv">10</span>),
  <span class="kw">tableOutput</span>(<span class="st">&quot;value_table&quot;</span>)
)

server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  output<span class="op">$</span>hist_plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Choose input$count random values from a normal distribution,</span>
    <span class="co"># and create a histogram</span>
    values &lt;-<span class="st"> </span><span class="kw">rnorm</span>(input<span class="op">$</span>count)
    <span class="kw">hist</span>(values, <span class="dt">breaks =</span> input<span class="op">$</span>bins)
  })
  
  output<span class="op">$</span>value_table &lt;-<span class="st"> </span><span class="kw">renderTable</span>({
    <span class="co"># Choose input$count random values from a normal distribution,</span>
    <span class="co"># and display the first input$rows</span>
    values &lt;-<span class="st"> </span><span class="kw">rnorm</span>(input<span class="op">$</span>count)
    <span class="kw">data.frame</span>(<span class="kw">head</span>(values, input<span class="op">$</span>rows))
  }, <span class="dt">colnames =</span> <span class="ot">FALSE</span>)
}

<span class="kw">shinyApp</span>(ui, server)</code></pre></div>
<p>By careful inspection of the code, we can see that <code>input$count</code> affects both outputs, while <code>input$bins</code> affects only the plot and <code>input$rows</code> affects only the table. Run the app, and you’ll see that Shiny knows this too. If you change <code>input$bins</code>, the plot is affected but the table is not. If you change <code>input$rows</code>, the table is affected but the plot is not.</p>
<p>The point of this example is to demonstrate that Shiny doesn’t simply re-render all of its outputs whenever an input has changed. Somehow, without a lot of help from us, Shiny figures out which inputs should affect which outputs. This is the most “magical” aspect of reactive programming, and we’ll eventually pull back the curtain in section TODO; for now, just trust that it works.</p>
<div id="outputs-are-atomic" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Outputs are atomic</h3>
<p>Shiny is smart enough to discern that an output needs to be updated. However, it’s not nearly smart enough to know if it can get away with running only part of the output’s code block. For example, the code for <code>hist_plot</code> has two lines:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">values &lt;-<span class="st"> </span><span class="kw">rnorm</span>(input<span class="op">$</span>count)
<span class="kw">hist</span>(values, <span class="dt">breaks =</span> input<span class="op">$</span>bins)</code></pre></div>
<p>As a human looking at this code, you might conclude that when <code>input$bins</code> changes, it’s not necessary to re-run both lines; if we still had access to the existing <code>values</code> variable, merely running the second line might be enough.</p>
<p>Shiny doesn’t try to be this clever. Instead, an output’s render code block is always executed in its entirety, whether it’s two lines of code or two hundred. In this way, each output represents an indivisible unit.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="advanced-ui.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reactive-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-intro-to-reactivity.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["shiny-book.pdf", "shiny-book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
